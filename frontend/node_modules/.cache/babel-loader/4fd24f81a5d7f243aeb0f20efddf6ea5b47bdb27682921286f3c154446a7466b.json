{"ast":null,"code":"const express = require('express');\nconst cors = require('cors');\nconst helmet = require('helmet');\nconst morgan = require('morgan');\nconst path = require('path');\nconst {\n  errorHandler\n} = require('./middleware/errorHandler');\nconst {\n  logger\n} = require('./utils/logger');\nconst roomRoutes = require('./routes/roomRoutes');\nconst applianceRoutes = require('./routes/applianceRoutes');\nconst app = express();\n\n// Middleware\napp.use(cors());\napp.use(helmet());\napp.use(morgan('combined', {\n  stream: {\n    write: msg => logger.info(msg.trim())\n  }\n}));\napp.use(express.json());\n\n// Serve static files for profile pictures\napp.use('/uploads/profile-pictures', express.static(path.join(__dirname, 'uploads/profile-pictures')));\n\n// Routes\napp.use('/api/users', require('./routes/userRoutes'));\napp.use('/api/homes', require('./routes/homeRoutes'));\napp.use('/api/rooms', roomRoutes);\napp.use('/api/appliances', applianceRoutes);\n\n// Error handler\napp.use(errorHandler);\nmodule.exports = app;","map":{"version":3,"names":["express","require","cors","helmet","morgan","path","errorHandler","logger","roomRoutes","applianceRoutes","app","use","stream","write","msg","info","trim","json","static","join","__dirname","module","exports"],"sources":["C:/Users/Brian/OneDrive/Desktop/HomeEnergyIOT/src/App.js"],"sourcesContent":["const express = require('express');\r\nconst cors = require('cors');\r\nconst helmet = require('helmet');\r\nconst morgan = require('morgan');\r\nconst path = require('path');\r\nconst { errorHandler } = require('./middleware/errorHandler');\r\nconst { logger } = require('./utils/logger');\r\nconst roomRoutes = require('./routes/roomRoutes');\r\nconst applianceRoutes = require('./routes/applianceRoutes');\r\nconst app = express();\r\n\r\n// Middleware\r\napp.use(cors());\r\napp.use(helmet());\r\napp.use(morgan('combined', { stream: { write: (msg) => logger.info(msg.trim()) } }));\r\napp.use(express.json());\r\n\r\n// Serve static files for profile pictures\r\napp.use('/uploads/profile-pictures', express.static(path.join(__dirname, 'uploads/profile-pictures')));\r\n\r\n// Routes\r\napp.use('/api/users', require('./routes/userRoutes'));\r\napp.use('/api/homes', require('./routes/homeRoutes'));\r\napp.use('/api/rooms', roomRoutes);\r\napp.use('/api/appliances', applianceRoutes);\r\n\r\n// Error handler\r\napp.use(errorHandler);\r\n\r\nmodule.exports = app;"],"mappings":"AAAA,MAAMA,OAAO,GAAGC,OAAO,CAAC,SAAS,CAAC;AAClC,MAAMC,IAAI,GAAGD,OAAO,CAAC,MAAM,CAAC;AAC5B,MAAME,MAAM,GAAGF,OAAO,CAAC,QAAQ,CAAC;AAChC,MAAMG,MAAM,GAAGH,OAAO,CAAC,QAAQ,CAAC;AAChC,MAAMI,IAAI,GAAGJ,OAAO,CAAC,MAAM,CAAC;AAC5B,MAAM;EAAEK;AAAa,CAAC,GAAGL,OAAO,CAAC,2BAA2B,CAAC;AAC7D,MAAM;EAAEM;AAAO,CAAC,GAAGN,OAAO,CAAC,gBAAgB,CAAC;AAC5C,MAAMO,UAAU,GAAGP,OAAO,CAAC,qBAAqB,CAAC;AACjD,MAAMQ,eAAe,GAAGR,OAAO,CAAC,0BAA0B,CAAC;AAC3D,MAAMS,GAAG,GAAGV,OAAO,CAAC,CAAC;;AAErB;AACAU,GAAG,CAACC,GAAG,CAACT,IAAI,CAAC,CAAC,CAAC;AACfQ,GAAG,CAACC,GAAG,CAACR,MAAM,CAAC,CAAC,CAAC;AACjBO,GAAG,CAACC,GAAG,CAACP,MAAM,CAAC,UAAU,EAAE;EAAEQ,MAAM,EAAE;IAAEC,KAAK,EAAGC,GAAG,IAAKP,MAAM,CAACQ,IAAI,CAACD,GAAG,CAACE,IAAI,CAAC,CAAC;EAAE;AAAE,CAAC,CAAC,CAAC;AACpFN,GAAG,CAACC,GAAG,CAACX,OAAO,CAACiB,IAAI,CAAC,CAAC,CAAC;;AAEvB;AACAP,GAAG,CAACC,GAAG,CAAC,2BAA2B,EAAEX,OAAO,CAACkB,MAAM,CAACb,IAAI,CAACc,IAAI,CAACC,SAAS,EAAE,0BAA0B,CAAC,CAAC,CAAC;;AAEtG;AACAV,GAAG,CAACC,GAAG,CAAC,YAAY,EAAEV,OAAO,CAAC,qBAAqB,CAAC,CAAC;AACrDS,GAAG,CAACC,GAAG,CAAC,YAAY,EAAEV,OAAO,CAAC,qBAAqB,CAAC,CAAC;AACrDS,GAAG,CAACC,GAAG,CAAC,YAAY,EAAEH,UAAU,CAAC;AACjCE,GAAG,CAACC,GAAG,CAAC,iBAAiB,EAAEF,eAAe,CAAC;;AAE3C;AACAC,GAAG,CAACC,GAAG,CAACL,YAAY,CAAC;AAErBe,MAAM,CAACC,OAAO,GAAGZ,GAAG","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}